garage:
  replicationFactor: "1"
  s3:
    api:
      region: "us-east-1"
      rootDomain: "s3-sw.philippmhauptmann.me"
    web:
      rootDomain: "master-sw.philippmhauptmann.me"
      index: "index.html"

persistence:
  enabled: true
  meta:
    storageClass: "longhorn"
    size: 100Mi
    # used only for daemon sets
    #hostPath: /var/lib/garage/meta
  data:
    storageClass: "longhorn"
    size: 100Gi
    # used only for daemon sets
    #hostPath: /var/lib/garage/data

ingress:
  s3:
    api:
      enabled: false
      # -- Rely _either_ on the className or the annotation below but not both!
      # If you want to use the className, set
      className: "traefik"
      # and replace "nginx" by an Ingress controller name,
      # examples [here](https://kubernetes.io/docs/concepts/services-networking/ingress-controllers).
      annotations:
        traefik.ingress.kubernetes.io/router.tls.certresolver: cloudflare
        # kubernetes.io/ingress.class: nginx
        # kubernetes.io/tls-acme: "true"
      hosts:
        # -- garage S3 API endpoint, to be used with awscli for example
        - host: "s3-sw.philippmhauptmann.me"
          paths:
            - path: /
              pathType: Prefix
        # -- garage S3 API endpoint, DNS style bucket access
        - host: "*.s3-sw.philippmhauptmann.me"
          paths:
            - path: /
              pathType: Prefix
    web:
      enabled: false
      className: "traefik"
      # and replace "nginx" by an Ingress controller name,
      # examples [here](https://kubernetes.io/docs/concepts/services-networking/ingress-controllers).
      annotations:
        traefik.ingress.kubernetes.io/router.tls.certresolver: cloudflare
        # kubernetes.io/ingress.class: nginx
        # kubernetes.io/tls-acme: "true"
      labels: {}
      hosts:
      # --  wildcard website access with bucket name prefix
       - host: "*.master-sw.philippmhauptmann.me"
         paths:
           - path: /
             pathType: Prefix
       # -- specific bucket access with FQDN bucket
       - host: "master-sw.philippmhauptmann.me"
         paths:
           - path: /
             pathType: Prefix
      tls: []
      #  - secretName: my-garage-cluster-tls
      #    hosts:
      #      - kubernetes.docker.internal

monitoring:
  metrics:
    # -- If true, a service for monitoring is created with a prometheus.io/scrape annotation
    enabled: false
    serviceMonitor:
      # -- If true, a ServiceMonitor CRD is created for a prometheus operator
      # https://github.com/coreos/prometheus-operator
      enabled: false
      path: /metrics
      #  namespace: monitoring  (defaults to use the namespace this chart is deployed to)
      labels: {}
      interval: 15s
      scheme: http
      tlsConfig: {}
      scrapeTimeout: 10s
      relabelings: []
